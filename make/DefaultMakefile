%_tb: %_tb.c %.h | lib%.so
	$(CC) $(CCFLAGS) -o $@ $< $| $(LINKER)

lib%.so: %.c %.h _%.h
	$(CC) $(CCFLAGS) -shared $< -fPIC -o lib$*.so $(LINKER)

.PHONY: clean
clean:
	-rm -f *_tb *.o *.so
